<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:modeler="http://camunda.org/schema/modeler/1.0" id="Definitions_019h9zd" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="5.16.0" modeler:executionPlatform="Camunda Cloud" modeler:executionPlatformVersion="8.3.0">
  <bpmn:collaboration id="Collaboration_1ebl53g">
    <bpmn:participant id="Participant_1bmsryc" name="Carrefour" processRef="Process_1tmpvol" />
    <bpmn:participant id="Participant_02iwzxr" name="Auth (Keycloak/SAQ)" processRef="Process_0424vn7" />
    <bpmn:participant id="Participant_0cd7kng" name="Partenaire (OP)" processRef="Process_0lu1r75" />
    <bpmn:messageFlow id="Flow_0fts5oo" sourceRef="Activity_10nohbq" targetRef="Activity_0hf8mxe" />
    <bpmn:messageFlow id="Flow_1pquuks" sourceRef="Event_1oxxrq5" targetRef="Activity_0ypf5tk" />
    <bpmn:messageFlow id="Flow_1kj6mt0" sourceRef="Event_1yjasb5" targetRef="Activity_070va8d" />
    <bpmn:messageFlow id="Flow_0pdbsel" sourceRef="Activity_0kgxinp" targetRef="Activity_04gbx3k" />
  </bpmn:collaboration>
  <bpmn:process id="Process_1tmpvol" isExecutable="true">
    <bpmn:laneSet id="LaneSet_1ps7sly" />
    <bpmn:intermediateThrowEvent id="Event_1yjasb5">
      <bpmn:incoming>Flow_0l5gu6v</bpmn:incoming>
      <bpmn:outgoing>Flow_1rnt9xz</bpmn:outgoing>
    </bpmn:intermediateThrowEvent>
    <bpmn:intermediateThrowEvent id="Event_1oxxrq5">
      <bpmn:incoming>Flow_0fr6nfz</bpmn:incoming>
      <bpmn:outgoing>Flow_1gdt8mr</bpmn:outgoing>
    </bpmn:intermediateThrowEvent>
    <bpmn:userTask id="Activity_10nohbq" name="Accède au Carrefour">
      <bpmn:incoming>Flow_0wr1tua</bpmn:incoming>
      <bpmn:outgoing>Flow_0fr6nfz</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:userTask id="Activity_0gn0ti9" name="Choisi le formulaire de l&#39;OP Désiré">
      <bpmn:incoming>Flow_1gdt8mr</bpmn:incoming>
      <bpmn:outgoing>Flow_0l5gu6v</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:userTask id="Activity_0kgxinp" name="Affiche WebComponent de l&#39;OP">
      <bpmn:incoming>Flow_1rnt9xz</bpmn:incoming>
      <bpmn:outgoing>Flow_0q061bw</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:endEvent id="Event_0hdv65k">
      <bpmn:incoming>Flow_0q061bw</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:startEvent id="StartEvent_1">
      <bpmn:outgoing>Flow_0wr1tua</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:sequenceFlow id="Flow_0l5gu6v" sourceRef="Activity_0gn0ti9" targetRef="Event_1yjasb5" />
    <bpmn:sequenceFlow id="Flow_1rnt9xz" name="Nouveau&#10;jeton d&#39;accès" sourceRef="Event_1yjasb5" targetRef="Activity_0kgxinp" />
    <bpmn:sequenceFlow id="Flow_0fr6nfz" name="Code autorisation" sourceRef="Activity_10nohbq" targetRef="Event_1oxxrq5" />
    <bpmn:sequenceFlow id="Flow_1gdt8mr" name="Jetons" sourceRef="Event_1oxxrq5" targetRef="Activity_0gn0ti9" />
    <bpmn:sequenceFlow id="Flow_0wr1tua" sourceRef="StartEvent_1" targetRef="Activity_10nohbq" />
    <bpmn:sequenceFlow id="Flow_0q061bw" sourceRef="Activity_0kgxinp" targetRef="Event_0hdv65k" />
  </bpmn:process>
  <bpmn:process id="Process_0424vn7" isExecutable="false">
    <bpmn:laneSet id="LaneSet_0e22cjb" />
    <bpmn:serviceTask id="Activity_070va8d" name="Échange jeton (token exchange)" />
    <bpmn:serviceTask id="Activity_0ypf5tk" name="Échange code accès pour tokens" />
    <bpmn:userTask id="Activity_0hf8mxe" name="S&#39;authentifie" />
  </bpmn:process>
  <bpmn:process id="Process_0lu1r75" isExecutable="false">
    <bpmn:serviceTask id="Activity_04gbx3k" name="Obtenir contenu" />
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Collaboration_1ebl53g">
      <bpmndi:BPMNShape id="Participant_1bmsryc_di" bpmnElement="Participant_1bmsryc" isHorizontal="true">
        <dc:Bounds x="129" y="80" width="1191" height="250" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1yjasb5_di" bpmnElement="Event_1yjasb5">
        <dc:Bounds x="812" y="192" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1oxxrq5_di" bpmnElement="Event_1oxxrq5">
        <dc:Bounds x="522" y="192" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1u7xa71_di" bpmnElement="Activity_10nohbq">
        <dc:Bounds x="310" y="170" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0bq060m_di" bpmnElement="Activity_0gn0ti9">
        <dc:Bounds x="640" y="170" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1mhb3u0_di" bpmnElement="Activity_0kgxinp">
        <dc:Bounds x="970" y="170" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0hdv65k_di" bpmnElement="Event_0hdv65k">
        <dc:Bounds x="1192" y="192" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1">
        <dc:Bounds x="219" y="192" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_0l5gu6v_di" bpmnElement="Flow_0l5gu6v">
        <di:waypoint x="740" y="210" />
        <di:waypoint x="812" y="210" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1rnt9xz_di" bpmnElement="Flow_1rnt9xz">
        <di:waypoint x="848" y="210" />
        <di:waypoint x="970" y="210" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="879" y="176" width="64" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0fr6nfz_di" bpmnElement="Flow_0fr6nfz">
        <di:waypoint x="410" y="210" />
        <di:waypoint x="522" y="210" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="423" y="192" width="87" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1gdt8mr_di" bpmnElement="Flow_1gdt8mr">
        <di:waypoint x="558" y="210" />
        <di:waypoint x="640" y="210" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="583" y="192" width="33" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0wr1tua_di" bpmnElement="Flow_0wr1tua">
        <di:waypoint x="255" y="210" />
        <di:waypoint x="310" y="210" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0q061bw_di" bpmnElement="Flow_0q061bw">
        <di:waypoint x="1070" y="210" />
        <di:waypoint x="1192" y="210" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Participant_02iwzxr_di" bpmnElement="Participant_02iwzxr" isHorizontal="true">
        <dc:Bounds x="129" y="330" width="1191" height="250" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1ppbscd_di" bpmnElement="Activity_070va8d">
        <dc:Bounds x="780" y="410" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1iwsdnk_di" bpmnElement="Activity_0ypf5tk">
        <dc:Bounds x="490" y="410" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1u70ijc_di" bpmnElement="Activity_0hf8mxe">
        <dc:Bounds x="310" y="410" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Participant_0cd7kng_di" bpmnElement="Participant_0cd7kng" isHorizontal="true">
        <dc:Bounds x="129" y="580" width="1191" height="250" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1cmr0y8_di" bpmnElement="Activity_04gbx3k">
        <dc:Bounds x="970" y="660" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_0fts5oo_di" bpmnElement="Flow_0fts5oo">
        <di:waypoint x="360" y="250" />
        <di:waypoint x="360" y="410" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1pquuks_di" bpmnElement="Flow_1pquuks">
        <di:waypoint x="540" y="230" />
        <di:waypoint x="540" y="410" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1kj6mt0_di" bpmnElement="Flow_1kj6mt0">
        <di:waypoint x="830" y="228" />
        <di:waypoint x="830" y="410" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0pdbsel_di" bpmnElement="Flow_0pdbsel">
        <di:waypoint x="1020" y="250" />
        <di:waypoint x="1020" y="660" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
